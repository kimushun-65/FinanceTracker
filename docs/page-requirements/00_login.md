# ログインページ 設計書

## ページ概要
Google認証（Auth0経由）を使用したソーシャルログインページです。パスワードベースの認証は使用せず、Googleアカウントでのログインのみをサポートします。

## 主要機能

### 1. Googleログイン
- **Googleでログインボタン**: 
  - 大きく中央に配置
  - Googleのブランドガイドラインに準拠したデザイン
  - クリックでAuth0の認証フローを開始
- **ログインフロー**:
  1. ボタンクリックでAuth0へリダイレクト
  2. Googleの認証画面で認証
  3. Auth0コールバック処理
  4. ダッシュボードへ自動遷移

### 2. ブランディング要素
- **アプリロゴ**: FinSightロゴを上部に表示
- **キャッチコピー**: 「賢い家計管理をシンプルに」
- **機能紹介**: 
  - 支出の自動カテゴリ分類
  - リアルタイム予算管理
  - AIによる支出最適化提案

### 3. セキュリティ表示
- **SSL/TLS表示**: 「安全な接続」アイコン
- **プライバシーポリシーリンク**: 下部に配置
- **利用規約リンク**: 下部に配置

## 対応API・認証フロー

### Auth0統合
1. **認証開始**:
   - Auth0のauthorize URLへリダイレクト
   - response_type: code
   - scope: openid profile email
   - connection: google-oauth2

2. **コールバック処理**:
   - **POST /auth/callback**
     - Auth0からの認証コード受信
     - アクセストークン・IDトークン取得
     - ユーザー情報の同期

3. **ユーザー同期**:
   - **POST /auth/sync**
     - Auth0のユーザー情報をシステムに同期
     - 初回ログイン時は新規ユーザー作成
     - 2回目以降は既存ユーザー情報更新

## UI/UX要件

### レスポンシブデザイン
- **モバイル優先**: スマートフォンでも快適に操作
- **中央寄せレイアウト**: 全デバイスで統一感
- **最大幅制限**: 400px程度で読みやすさ確保

### アクセシビリティ
- **高コントラスト**: 背景と文字の十分なコントラスト
- **フォーカス表示**: キーボード操作時の明確なフォーカス
- **スクリーンリーダー対応**: 適切なARIAラベル

### パフォーマンス
- **高速表示**: 1秒以内の初期表示
- **プリロード**: Auth0 SDKの事前読み込み
- **エラーハンドリング**: 認証失敗時の適切なメッセージ

## セキュリティ要件

### CSRF対策
- **state パラメータ**: ランダムな値で検証
- **セッション管理**: セキュアなセッションクッキー

### リダイレクト制御
- **ホワイトリスト**: 許可されたリダイレクトURLのみ
- **オープンリダイレクト防止**: 外部サイトへの誘導を防止

## エラーケース

### 認証エラー
- **アクセス拒否**: 「ログインがキャンセルされました」
- **ネットワークエラー**: 「接続エラーが発生しました」
- **Auth0エラー**: 「認証サービスに接続できません」

### リトライ機能
- **再試行ボタン**: エラー時に表示
- **自動リトライ**: ネットワークエラー時は3秒後に再試行

## 実装優先順位
1. 基本的なGoogleログイン機能
2. エラーハンドリング
3. ブランディング要素の追加
4. アニメーション・トランジション

## 画面設計（ASCII）

```
+--------------------------------------------------------------------------------------------------+
|                                         FinSight                                                 |
+--------------------------------------------------------------------------------------------------+
|                                                                                                  |
|                                                                                                  |
|                                    [FinSight Logo]                                               |
|                                                                                                  |
|                               賢い家計管理をシンプルに                                               |
|                                                                                                  |
|                                                                                                  |
|                          ┌────────────────────────────────┐                                      |
|                          │                                │                                      |
|                          │    [G] Sign in with Google     │                                      |
|                          │                                │                                      |
|                          └────────────────────────────────┘                                      |
|                                                                                                  |
|                                                                                                  |
|                          ✓ 支出の自動カテゴリ分類                                                   |
|                          ✓ リアルタイム予算管理                                                     |
|                          ✓ AIによる支出最適化提案                                                   |
|                                                                                                  |
|                                                                                                  |
|                                                                                                  |
|                                                                                                  |
|                          プライバシーポリシー | 利用規約                                              |
|                                                                                                  |
+--------------------------------------------------------------------------------------------------+
```

### 画面要素説明

#### ヘッダー部
- **アプリ名**: FinSight（中央配置）

#### メインコンテンツ
- **ロゴ**: アプリのブランドロゴ
- **キャッチコピー**: メインメッセージ
- **Googleログインボタン**: 
  - Googleカラー（白背景、影付き）
  - Googleアイコン付き
  - ホバー時にエレベーション変化

#### 機能紹介
- **チェックマーク付きリスト**: 主要機能を簡潔に説明

#### フッター
- **リンク**: プライバシーポリシーと利用規約へのリンク

### ログイン成功時の遷移
```
ログインページ → Auth0認証 → Googleログイン → コールバック → ダッシュボード
```